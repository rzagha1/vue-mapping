<html>
  <head>
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>

    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100vh;
        width: 100vw;
      }
    </style>
  </head>

  <body>
    <div id="map"></div>
  </body>

  <script type="text/javascript">
    async function initialize() {
        const key = 'mx0LZnxQmee0xEQSHpKj';

      // Create deck.gl map
      const deckgl = new deck.DeckGL({
        container: 'map',
        map: maplibregl,
        mapStyle: `https://api.maptiler.com/maps/basic-v2/style.json?key=${key}`,
        initialViewState: {
          longitude: -74.0115,
          latitude: 40.7082,
          zoom: 14,
          pitch: 0
        },
        controller: true,
        layers: [
          new deck.MVTLayer({
            data: 'http://localhost:7800/public.us_points/{z}/{x}/{y}.pbf',
            minZoom: 0,
            maxZoom: 23,
            getFillColor: [255, 0, 0],
            pointRadiusMinPixels: 1
          })
        ]
      });
    }

    initialize();
  </script>
</html>